# ネットワーク機器
ネットワーク機器はOSI参照モデルの階層に従って、エンドユーザ間のデータを中継する。位置付けとしてはネットワーク層にはルータとレイヤ3スイッチ、データリンク層にはブリッジとスイッチ、物理層にはリピータとハブが該当する。

### `リピータ、ハブ`
リピータとハブは、フレームの単なる電気信号として扱う物理層で動作するデバイス。通信の距離が長くなると、伝送中にノイズや減衰の影響で電気信号の波形が歪み、ひどくなると受信側で解釈できずに正しいビット列に戻せないことがある。**リピータ**は、電気信号を増幅し波形を再生して中継を行う。初期イーサネット(10BASE5, 10BASE2)において、最大ケーブル長を延長してネットワークを拡張(分岐)する目的で使われていた信号増幅装置。  
**ハブ**は、リピータの機能を持つ集線装置で、他のタイプのハブと区別するために**リピータハブ**とも呼ばれる。ハブは複数のポートをもち、あるポートで受信した電気信号を増幅して波形を再生し、受信ポートを除く全てのポートに信号を中継する。
- コリジョンメイン:イーサネットのネットワークにおいて、電気信号の衝突が伝わる範囲のこと。セグメントとも呼ぶ。リピータを用いてバス型ネットワークを拡張したり、ハブをカスケード接続(ハブの相互接続)したりすると、コリジョンドメインの範囲は拡大する。1つのコリジョンドメインに多数のホストが接続されると、衝突が頻繁に発生して再送信の可能性が高くなり、結果的にネットワークのパフォーマンスが低下する。

### `ブリッジ、スイッチ`
MACアドレスを使用してフレームの中継を行うデータリンク層で動作する。**ブリッジ**は、ネットワークを拡張してコリジョンドメインが拡大したとき、ネットワークのパフォーマンスが低下する問題を解決するために、スイッチよりも先に登場した。  
フレームヘッダに含まれるMACアドレスを基に、あるセグメントから別のセグメントへのフレームの中継や、別のセグメントにフレームが送信されるのをフィルタリング(選択遮断)することができる。フレームのフィルタリングはMACアドレステーブルを使って行われる。  
ブリッジはMACアドレステーブルにMACアドレスに対応するポート情報を保持している。ブリッジは1番ポートでフレームを受信すると、宛先MACアドレスを基にMACアドレステーブルを検索し、宛先が受信ポートと同じポートであるとフレームを破棄する。送信先と宛先が同じコリジョンドメインに接続されていると、フレームを中継する必要はないと判断する。  
別のポートでMACアドレステーブルに学習されていた場合、ブリッジはフレームを中継する。このようにしてブリッジは不要なフレームの中継を抑制することができ、ホスト(ノード)数の増加に伴って増大するコリジョンを減少させる(2つのセグメントを相互に接続して橋渡しを行う)。  
**スイッチ**は複数のポートを持ち、たくさんのセグメントを相互に接続する集線装置であり、スイッチングハブ・レイヤ2スイッチ(L2スイッチ)とも呼ばれる。
- ブリッジとスイッチの違い:スイッチもブリッジと同様にMACアドレステーブルを持ち、コリジョンドメインの分割とセグメント間のフレームの中継とフィルタリングを行う。基本原理は同じだが、元々の違いは「スイッチはマルチポート(3個以上のポートを持つ)であり、どのポートにフレームを中継するかまだ判断する」。**どちらもデータリンク層デバイス**。  
2ポートのブリッジは、フレームの宛先MACアドレスが送信元と同じセグメントかそうでないかを判断し、必要に応じてセグメント間の中継を行う。  
スイッチは、MACアドレステーブルを基に各ポートに接続されているホストを識別し、適切なポートを選んでフレームを転送する。またスイッチは、フレームの中継を高速化するために、ASIC(特定用途向け集積回路)と呼ばれるスイッチング処理専用のICチップを搭載している。

|          |ブリッジ            |スイッチ                |
|----------|------------------|-----------------------|
|フレーム処理|中継か抑制かを判断   |マルチポート(転送先まで識別)|
|転送速度   |低速(ソフトウェア処理)|高速(ハードウェア処理)    |
|ポート密度 |低い(ポート数少ない)  |高い(ポート数多い)        |

### `ルータ、レイヤ3スイッチ`

### `デフォルトゲートウェイ`

### `ネットワーク機器のまとめ`

> ### `L3デバイス(ネットワーク層):ルータ、レイヤ3スイッチ`
> ### `L2デバイス(データリンク層):スイッチ、ブリッジ`
> ### `L1デバイス(物理層):ハブ、リピータ`

> ### `ハブ:コリジョンドメイン1つで構成するデバイス`
