# MACアドレステーブル
スイッチの基本操作はフレーム転送(ブリッジング)をすること。スイッチはMACアドレステーブルを使ってフレームを必要なポートに転送する。

### `MACアドレステーブルの表示`
Catalystスイッチでは、**CAM**(*Content Addressable Memory*)と呼ばれるメモリを用いてMACアドレステーブルの検索機能をハードウェア化し、フレーム転送処理の高速化を実現している。そのため、シスコではMACアドレスMACアドレステーブルのことを**CAMテーブル**と呼ぶことがある。MACアドレステーブルに登録されるアドレスには2種類のタイプがある。  
ダイナミック(動的):受信したフレームの送信元MACアドレスを動的に学習したアドレス  
スタティック(静的):管理者が手動で登録したアドレス  
**MACアドレステーブルの表示(mode:>, #)**  
`#show mac address-table [dynamic | static]`  
dynamic:動的に学習した情報のみを表示(オプション)  
static:静的と最初から登録されている情報を表示(オプション)  
Ports部分にCPUと表示されているスタティックなエントリは、CDPやSTPなどで使用されるマルチキャストMACアドレス。宛先フレームを受信すると、そのフレームはスイッチ内部のCPUへ転送される。

### `スタティックMACアドレスの登録`
MACアドレステーブルに手動でエントリを登録するには、***mac address-table static***コマンドを使用する。静的に登録されたスタティックアドレスはMACアドレステーブルに永続的に保持される。登録されたスタティックアドレスを削除するには登録した時のコマンドの先頭にnoをつけて実行する。  
**スタティックMACアドレステーブルの登録**  
`(config)#mac address-table static <mac-address> vlan <vlan-id> interface <interface>`  
mac-address:登録するユニキャストまたはマルチキャストアドレスMACアドレスを指定  
vlan-id:ポートに対応付けるVLANの番号を1 ~ 4094の範囲で指定  
interface:MACアドレスに対応付けるポートを指定

### `MACアドレステーブルのエージングタイム`
MACアドレステーブルに動的に学習されたダイナミックアドレスエントリは、使用されなくなると期限切れとみなされて自動的に消去される。Catalystスイッチではデフォルトで300秒はダイナミックアドレスを保持する。この時間を**エージングタイム**といい、***show mac address-table aging-time***コマンドで確認できる。  
**MACアドレスのエージングタイムの表示(mode:>, #)**  
`#show mac address-table aging-time`  
MACアドレステーブルの最大サイズはスイッチ機種による。空きがなくなった場合、既存のエントリが期限切れになるまで新規アドレスは全てフラッディングされる。管理者は特権EXECモードから、***clear mac address-table dynamic***コマンドを使用すると、MACアドレステーブルから動的に学習したエントリを削除することができる。

---
> MACアドレステーブルは作業領域メモリである「RAM」上で保持され、スイッチの電源を切ると学習したエントリは消去される
