# 経路集約
VLSMによって管理者はより多くの階層型アドレッシングを設計することができる。経路集約は、分割された一連のサブネットアドレスを1つの集約アドレスとして表現する。そのため、各ルータで管理される経路情報の数を減らすことができる。

### `経路集約とは`
ルーティングテーブルに学習された複数のネットワークアドレスを1つにまとめることを指す。以下の利点がある。  
・ルーティングテーブルのサイズを縮小し、メモリ使用量とルーティングプロトコルのトラフィック量を削減する  
・特定サブネットがダウンしたとき、集約アドレスしか持たないルータへ通知の必要がないため、トポロジ変換時に影響が及ぶ範囲を小さくすることができる

### `経路集約の方法`
連続するネットワークアドレスを2進数にしたとき、上位ビットの並びが共通する部分までプレフィックス長を変更して1つのアドレスに集約する。172.16.0.0/24 ~ 172.16.31.0/24までの32個のサブネットアドレスの場合、上位19ビットが共通するため、172.16.0.0/19に集約できる。  
172.16.0.0/24 => 10101100.00010000.00000000.00000000  
172.16.31.0/24 =>10101100.00010000.00011111.00000000  
経路集約は階層型のアドレッシング環境で利用すると効果的。VLSMによって設計された階層型アドレッシング環境では、経路集約をより有効に活用できる。

### `ルーティングプロトコルによる経路集約`
集約アドレスをルーティングプロトコルによって通知する場合、クラスフルルーティングプロトコルとクラスレスルーティングプロトコルでは経路集約の方式が異なる。

- クラスフルルーティングプロトコルの経路集約  
クラスフルルーティングプロトコルでは、クラスフルネットワークの境界で経路情報をクラス単位で自動集約する。クラスフルルーティングプロトコルの場合、自動集約を無効にはできない。

- クラスレスルーティングプロトコルの経路集約  
クラスレスルーティングプロトコルでは、管理者によって手動で経路集約を行うことができる。ディスタンスベクター型のRIPv3とEIGRPは、任意のルータでインターフェイス上で自由に主導集約が可能。クラスフルネットワークの境界で自動集約を行い、環境に応じて自動集約を無効にすることも可能。リンクステート型の場合、エリア内の全てのルータが同じリンク情報をもつことが前提で動作する。そのため経路情報を集約できるルータは限定される。クラスフルネットワークの境界で自動集約されることはない。

|種別                       |プロトコル    |説明                                          |
|--------------------------|------------|----------------------------------------------|
|クラスフルルーティングプロトコル|RIPv1, IGRP |クラスフルネットワークの境界で自動集約(無効にできない)|
|クラスレスルーティングプロトコル|RIPv2, EIGRP|クラスフルネットワークの境界で自動集約(デフォルト有効)</br>エリアまたはASの境界で主導集約も可能(OSPF)|
