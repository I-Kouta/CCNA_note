# メトリックとアドミニストレーティブディスタンス
ルーティングは、受信したパケットの最適経路を選択するプロセス。その経路選択の基準となる値がメトリック。同じ宛先ネットワークの情報源が複数ある場合、どれを優先すべきかアドミニストレーティブディスタンス値で判断する。

### `メトリック`
同じ宛先ネットワークに対して複数の経路が存在する場合、各ルーティングプロトコルは最適経路を決定するため経路ごとに**メトリック**という数値を生成し、メトリック値が最小の経路を最適とみなす。算出のために使用する基準はルーティングプロトコルごとに異なる。

|プロトコル    |メトリック   |説明                                                       |
|------------|------------|----------------------------------------------------------|
|RIPv1, RIPv2|ホップカウント|ルータから宛先ネットワークまでに経由するルータの数                 |
|OSPF        |コスト       |インターフェイスの帯域幅から算出。主導設定も可                    |
|EIGRP       |帯域幅、遅延  |インターフェイスの帯域幅と遅延から算出。負荷と信頼性を使用することも可|

RIPを使用すると、ホップカウントが最小の経由を選択する。宛先ネットワークまでの回線速度を考慮しないため、転送速度が最大の経路が選択されるとは限らない。OSPFを使用した場合、コスト値が最小の経由を選択する。EIGRPを使用すると、帯域幅と遅延で算出した値が最小の経由を選択する。

### `アドミニストレーティブディスタンス`
企業ネットワークでは、複数のルーティングプロトコルとスタティックルートを併用することがある。ルータは1つの宛先ネットワークに対して複数の情報源がある場合、最も優先度の高いプロトコルからの経路情報だけをルーティングテーブルに学習する。この優先度を決定するための管理値を**アドミニストレーティブディスタンス**(AD)と呼ぶ。0 ~ 255の範囲で、**値が小さいほど優先度が高くなる**。あるネットワーク上のルータでRIP, EIGRP, OSPFを有効にしてそれぞれのプロトコルで同じ経路(ネットワーク)を受信した場合、ルータはアドミニストレーティブディスタンス値が最小のEIGRPで学習した経路だけをルーティングテーブルに格納する。さらに、スタティックルートをdistanceオプションなしで設定した場合、スタティックルートを優先してルーティングテーブルに格納する。

|経路の情報源     |デフォルトのAD値|
|---------------|--------------|
|直接接続        |0             |
|スタティックルート|1             |
|EIGRP集約       |5             |
|EBGP(外部BGP)   |20            |
|EIGRP          |90             |
|OSPF           |110            |
|IS-IS          |115            |
|RIPv1, RIPv2   |120            |
|EIGRP(外部)     |170            |
|IBGP(内部BGP)   |200            |
|不明            |255            |

---
> メトリック:ルーティングプロトコルが最適経路を決める値  
> アドミニストレーティブディスタンス:ルータがルーティングプロトコルの優先度を決める値
