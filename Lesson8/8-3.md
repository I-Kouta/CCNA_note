# ダイナミックルーティング
ルーティングプロトコルによって動的に学習されたダイナミックルートを使用したルーティングのことをダイナミックルーティングと呼ぶ

### `ダイナミックルート`
ルーティングプロトコルによって動的にルーティングプロトコルに学習される経路情報。ルータでルーティングプロトコルを有効にすると、経路に関する情報を他のルータと交換する。各ルータは受信した情報を基に最適経路を選択し、ルーティングテーブルに学習する。また、リンク障害などでトポロジに変化があった場合には、変更情報をルータ間で通知し合ってルーティングテーブルを更新する。  
ダイナミックルーティングでは、自動的にルーティングテーブルの保守が行われるため、管理者の負荷を削減でき規模の大きなネットワークで効果的。ただ、スタティックルートと比較してルータのメモリやCPUへの負荷がかかり、定期的にルーティングプロトコルのパケットをやり取りするため帯域幅も消費する。

### `ルーティングプロトコルの種類`
ネットワークの規模やトポロジ、ルーティングデバイス(機種)に応じて適切なルーティングプロトコルを選択する必要がある

- IGPとEGP  
**IGP**(*Interior Gateway Protocol*)はAS内部のルーティングに使用され、**EGP**(*Exterior Gateway Protocol*)はAS間でのルーティングに使用されるルーティングプロトコル。**AS**(*Autonomous System*)は、同じ運用ポリシーのもとで動作するネットワーク(またはルータ)の集合のことで、**自律システム**とも呼ばれる。ASによって、大きなネットワークを小さく分割することで管理が容易になる。インターネットは、各ASを大規模なISP(インターネットサービスプロバイダ)や企業によって形成し、ASを相互に監視することで構成されている。  
IGPにはRIP, OSPF, EIGRP, IS-IS、EGPにはBGPなどのルーティングプロトコルがある。  
IGP(*Interior Gateway Protocol*):AS内のルーティングに使用する  
EGP(*Exterior Gateway Protocol*):AS間でのルーティングに使用する

- IGPのルーティングアルゴリズムによる分類  
ルーティングプロトコルはルーティングアルゴリズムん違いにより、次のいずれかに分類される。  
ディスタンスベクター:RIP, IGRP, EIGRP(拡張ディスタンスベクター)  
リンクステート:OSPF, IS-IS  
**ディスタンスベクター型**は、ルーティングテーブルの情報を交換し、距離と方向(ネクストホップのこと)に基づいて最適経路を決定する方式。受信したパケットが宛先に到着するために、「どれだけの距離(ホップ数)が必要か」「どのネクストホップ(ルータ)を経由するか」を基準にして最適経路を選択する。  
**リンクステート型**は、各ルータが持つインターフェイスのリンクの状態を交換し、リンク情報に基づいて最適経路を決定する。各ルータはネットワーク全体のトポロジを把握し、SPFと呼ばれるアルゴリズムを使用して宛先ごろの最適経路を計算する。  
EIGRPは、ディスタンスベクター型のルーティングプロトコルであるIGRPにリンクステートの機能を取り入れたもの。ハイブリッド型または拡張ディスタンスベクター型に分類されることがある。

- クラスフルルーティングとクラスレスルーティング  
ルーティングプロトコルは、経路情報をアドバタイズ(通知)する際にサブネットマスクを含めるかどうかによって分類される。  
・クラスフルルーティングプロトコル:サブネットマスクを含まない(RIPv1, IGRP)  
・クラスレスルーティングプロトコル:サブネットマスクを含む(RIPv2, EIGRP, OSRF, IS-IS)</br>
**クラスフルルーティングプロトコル**は、サブネットマスクを通知しないため、受信側のルータで経路情報にサブネットマスクを付加してルーティングテーブルに学習する。どのようなマスク長にするかは規則で決定している。  
同じクラスフルアドレスの場合:受信インターフェイスのサブネットマスクを使用  
異なるクラスフルアドレスの場合:デフォルトのサブネットマスクを使用</br>
クラスフルアドレスは、クラスA, B, Cの概念に基づいたネットワークを指す。同じクラスフルアドレスから派生した経路情報を受信した場合、受信インターフェイスに割り当てられているサブネットマスクを使用する。そのため、クラスフルルーティングプロトコルを利用する場合、1つのネットワークアドレスから派生するサブネットは、マスク長を固定して割り当てる必要があり、VLSMでIPアドレスを効率的に使用することはできない。  
クラスフルルーティングプロトコルの場合、クラスフルネットワークを境界では、通知する経路情報をクラス単位に自動集約する。この経路情報を受信したルータは、クラスA, B, Cに基づいたサブネットマスクを使用してルーティングテーブルに学習する。
