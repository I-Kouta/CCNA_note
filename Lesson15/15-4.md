# IPv6アドレスの設定と検証

### `IPv6アドレスの主導設定`
ルータのインターフェイスに対してIPv6ユニキャストアドレス(グローバルまたはユニークローカル)を主導設定するには、**ipv6 address**コマンドを使用してIPアドレスとプレフィックス長を指定する。インターフェイスIDをEUI-64で自動生成する場合はコマンドの末尾に**eui-64**キーワードを付加する。  
**IPv6アドレスの手動設定**  
`(config-if)#ipv6 address <ipv6-address>/<prefix-length> [eui-64] [anycast]`  
ipv6-address:IPv6ユニキャストアドレスを指定(リンクローカルを除く)。eui-64を付加する場合、インターフェイスIDは全て0(::)を指定  
prefix-length:プレフィックス長を指定  
eui-64:インターフェイスIDをEUI-64を自動生成する(オプション)  
anycast:エニーキャストアドレスとして設定する場合に指定(オプション)
</br></br>
IPv6では、1つのインターフェイスに対して複数のユニキャストアドレスを割り当てることができる。ipv6 addressコマンドを別のアドレスに変えて実行すると、新しいIPアドレスが追加設定される。先頭にnoを付けると、そのインターフェイスのIPv6アドレスが全て消去される。一部のipv6アドレスを消去するには、消去するIPアドレス、プレフィックス長などを指定してnoコマンドを実行する。

### `リンクローカルアドレスの設定`
各インターフェイスでIPv6を有効化すると、リンクローカル(ユニキャスト)アドレスが自動的に割り当てられる。このリンクローカルアドレスのインターフェイスIDは、インターフェイスのMACアドレスに基づいてEUI-64で自動的に生成される。  
**インターフェイスに対するIPv6の有効化**  
`(config-if)#ipv6 enable`

リンクローカルアドレスを手動で設定するには、ipv6 addressコマンドの末尾に**link-local**キーワードを付加する。  
**リンクローカルアドレスの主導設定**  
`(config-if)#ipv6 address <ipv6-address> link-local`  
link-local:「FE80」で始まるリンクローカルアドレスを指定

リンクローカルアドレスは各インターフェイスに1つしか設定できないため、同じインターフェイスで別のアドレスのipv6 addressコマンドを実行すると、新しいIPv6アドレスに上書きされる。

### `IPv6アドレスの検証`
IPv6アドレスが正しく設定され、IPv6パケットのルーティングが可能な状態を検証するには、インターフェイスとルーティングテーブルを確認する。IPv6のコマンドはIPv4と似ており、ほとんどの場合「ip」を「ipv6」に置き換えて実行する。

- IPv6インターフェイスの確認  
IPv6アドレスを設定したインターフェイスの状態を確認するには、**show ipv6 interface**コマンドを使用する。特定のインターフェイス名を指定しない場合、IPv6が有効になっている全てのインターフェイスの情報が表示される。  
**IPv6インターフェイスの設定を表示(mode:#, >)**  
`#show ipv6 interface [<interface-id>]`  
interface-id:インターフェイス名を指定(オプション)、省略時は全てを表示</br></br>
**IPv6インターフェイスの要約情報の表示(mode:#, >)**  
`#show ipv6 interface brief [<interface-id>]`

- IPv6ルーティングテーブル  
ルータ上でIPv6とIPv4のルーティングが有効になっているとき、ルーティングテーブルは別で管理される。IPv6のルーティングテーブルを表示するには、**show ipv6 route**コマンドを使用する。インターフェイスにIPv6アドレスを割り当てると、2つのエントリがIPv6ルーティングテーブルに追加される。  
直接接続ネットワークのプレフィックス:コード「C」  
インターフェイスアドレス(/128):コード「L」  
**IPv6ルーティングテーブルの表示(mode:#, >)**  
`#show ipv6 route`

- IPv6ネイバーテーブル(ネイバーディスカバリーキャッシュ)


### `RA(Router Advertisement:ルータ広告)の設定`


- ステートレスアドレス自動設定の有効化

---
> ipv6では、1つのインターフェイスに複数のipv6アドレスを割り当てることができる。eui-64を付加すると、インターフェイスIDはEUI-64で自動生成される
