# ディスタンスベクター
ルーティングプロトコルのアルゴリズムの分類に、ディスタンスベクターとリンクステートがある

### `ディスタンスベクター`
距離と方向に基づいて宛先ネットワークへの最適経路を決定するルーティングアルゴリズム。各ルータはルーティングテーブルのコピーを定期的に隣のルータへ送信し、受信したルータは自身のルーティングテーブルと比較して最適情報に更新する。ディスタンスベクター型のルーティングプロトコルは、RIPとIGRPがあるが、IGRPはEIGRPへ拡張され、現在は使用されていない。動作は以下の通り。

- 1.直接接続されたネットワークを学習  
ルータのインターフェイスにIPアドレスが割り当てられると、ルーティングテーブルには直接接続されたネットワークの情報が学習される。

- 2.ルーティングアップデートを隣接ルータに送信  
3台のルータにRIPを設定すると、定期的に経路情報を交換しルーティングテーブルに学習する。RIPを起動したRT1ルータは、自身のルーティングテーブルにある経路情報にメトリック(ホップカウント)を1加算して、ルーティングアップデートをアドバタイズ(通知)する。アップデートを受信したRT2ルータは、未知のネットワーク「10.1.0.0」をメトリック1でルーティングテーブルに学習する。  
RT1ルータと同様にRT2ルータも自身のルーティングテーブルにある経路情報にメトリックを1加算してルーティングアップデートをアドバタイズし、アップデートをアップデートを受信したRT3ルータは、未知のネットワーク10.1.0.0(メトリック2)、10.2.0.0(メトリック1)をルーティングテーブルに学習する。  
RT3からRT2、RT2からRT1へも経路情報が伝播される。最終的に各ルータはリモートネットワークへの経路情報を自動的にルーティングテーブルに学習することができる。

- 3.定期的にルーティングアップデートを送信  
ディスタンスベクターでは、トポロジに変化がなくても完全なルーティングテーブルのアップデートを定期的に生成し、隣接ルータにアドバタイズする。これによって各ネットワークへの経路情報が最新かを判断でき、ルーティングテーブル全体が維持される。

- 4.ルーティングテーブルの保守  
ルータは隣接ルータからアップデートを受信すると保持するルーティングテーブルの内容と比較する。既知の経路情報のアップデートの受信の場合、メトリック値が小さい方を適切であるとしてルーティングテーブルを更新する。受信した経路情報が含まれなくなった場合は、そのネットワークがダウンしたとみなしてルーティングテーブルから削除する。</br>
ディスタンスベクターは、単純な動作でルーティングテーブルを生成し、最新の状態に維持できる。交換するルートの情報量が少なく、単純なアルゴリズムを使用しているため、ルータのメモリやCPUの負荷が少なくて済む。しかし自身では隣接するルータとのネットワークまでしか把握できず、隣接ルートの先にあるネットワークへの経路情報は全て隣接ルータから受信する。誤った経路情報を受け取った場合でもルーティングテーブルは更新されるため、パケットが一定のリンク上をループする障害が発生する可能性はある。ルーティングアップデートは段階的に進むため、ルータの台数が多いと正しい情報が伝わり収束(コンバージェンス)するまでに時間がかかる。

### `ディスタンスベクターの問題点と解決法`

- 無限カウント

- ルーティングループの問題

・スプリットホライズン

・ルートポイズニング

・ポイズンリバース

・ホールドダウンタイマー

・トリガードアップデート

### `ディスタンスベクタールーティングのタイマー`
