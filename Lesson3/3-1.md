# TCP / IPプロトコルスタック
TCP / IPはインターネットの標準プロトコルで、現在最も利用されている通信プロトコル。TCP / IPは単一のプロトコルではなく、TCP(*Transmission Control Protocol*)とIP(*Internet Protocol*)の2つのプロトコルを中心とするプロトコル群の総称。

### `TCP / IPプロトコルスタック`
TCPとIPを中心とするプロトコルの集まりを**TCP / IPプロトコルスタック**(TCP / IPプロトコルスイート)と呼ぶ。TCP / IPではネットワークで必要な機能を4つの階層に分割して構成している。

|階層 |名前                                  |役割                                                                    |OSI参照モデル                                 |
|----|--------------------------------------|-----------------------------------------------------------------------|--------------------------------------------|
|第4層|アプリケーション層                       |主にアプリケーション固有の規定を行い、ネットワークアプリケーションの機能を実現する  |アプリケーション層・プレゼンテーション層・セッション層|
|第3層|トランスポート層                         |通信における信頼性の機能を提供する                                          |トランスポート層                               |
|第2層|インターネット層                         |最適経路の決定など、エンドツーエンドの通信を行う機能を提供する                   |ネットワーク層                                 |
|第1層|リンク層</br>(ネットワークインターフェイス層)|主に隣接するノードと通信を行うための規定を行いネットワークを介したデータ通信を実現する|データリンク層・物理層                          |

### `TCP / IPのカプセル化・非カプセル化`
送信側で作成されたデータは、上位層プロトコルで作成されたデータの先頭に各階層の機能をヘッダとして付加してカプセル化する。リンク層ではデータの後ろにトレーラも付加する。受信側では逆の下位層から上位層に向かって非カプセル化の処理を行う。LAN上にあるコンピュータがWebページを閲覧する場合、HTTPデータに対して次の手順でカプセル化・非カプセル化の処理を行う。  
\[カプセル化]  
・アプリケーション層:HTTP、送信側が閲覧したいURLを入力して実行(HTTPデータ)  
・トランスポート層:TCPをカプセル化  
・インターネット層:IPをカプセル化  
・リンク層:Ethernet、Etherヘッダ付加およびFCSをトレーラ付与  

\[非カプセル化]  
・リンク層:Etherヘッダを外す、トレーラを外す  
・インターネット層:IPを非カプセル化  
・トランスポート層:TCPを非カプセル化  
・アプリケーション層:HTTP、ユーザからWebページの要求を受信(Webサーバ)  
