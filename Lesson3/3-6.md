# DNS
DNS(*Domain Name System*)はドメイン名をIPアドレスに変換するための仕組みで、現在はインターネットを利用するときに必要不可欠なシステムの一つ。

### `DNSの概要`
DNSは人間にとって理解しやすいホスト名(ドメイン名)からIPアドレスを検索する仕組み。WebサイトにアクセスするためにはURL(*Uniform Resource Locator*)を指定する。ただ実際にはIPアドレスを指定して通信する必要があるため「あのWebサイトのIPアドレスは何か」という問い合わせに対して、DNSはIPアドレスを検索して教えてくれる電話帳のような役割を果たしている。ホスト名とIPアドレスの対応付けを行うことを**名前解決**と呼ぶ。これがないとIPアドレスを自身で指定して通信しなければならない。IPアドレスはただ数字を並べただけの番号なのでわかりにくい。

### `ドメイン名の仕組み`
DNSで使用されるドメイン名の表記にはルールがある。**ドメイン名**は、特定の組織やグループを識別する名前と、その中のホスト名(PC名)をドット(.)でつないで表記する。ドットで区切られた部分を**ラベル**と呼び、最大63文字制限。ドメイン名全体ではドット含めて255文字以下の決まり。ラベルには英字、数字、ハイフンが使用でき、アルファベットの大文字小文字の区別はナシ。  
ラベルにはレベルが設定されており、右から「トップレベルドメイン(TLD、第一レベルドメイン)」、「セカンドレベルドメイン(SLD、第二レベルドメイン)」、「第3レベルドメイン」。一番左のラベルはホスト名(コンピュータ名)。メールアドレスの場合は@以降がドメイン名。www.example.co.jpのようなホスト名とドメイン名を省略せずに繋げて記述した文字列をFQDN(*Fully Qualified Domain Name*)と呼ぶ。

- トップレベルドメイン  
国別や一般などいくつかに分類されている  
・国別ドメイン:英字2文字で国や地域を表す。Japanのjp、United Statesのus、Chinaのcnなど  
・一般ドメイン:3 ~ 6文字程度で組織の属性を表す。商業・商用(commercial)のcom、ネットワーク関係(network)の(net)など

- セカンドレベルドメイン  
組織や地域を表すタイプなどで分類している。ただしトップレベルドメインによってポリシーが異なる場合がある。  
・一般企業はco、会社以外の団体はor、ネットワークサービスだとne  
・政府機関はgo、大学系の教育機関だとac、小中高だとed  
・東京都だとtokyoなど

### `名前解決の仕組み`
名前解決の方法は2つ。  
・DNS:DNSサーバに問い合わせる  
・hostsファイル:hostsファイルにホスト名とIPアドレスのマッピング(対応付けた)情報を登録しておく

- DNSによる名前解決  
DNSの基本の構成要素は、ドメイン名を基にIPアドレスの情報を検索する**リゾルバ**と、ドメイン名とIPアドレスの対照表を格納している**DNSサーバ**の2つ。アプリケーションがドメイン名で通信を開始するとき、アプリケーションはリゾルバを呼び出して名前解決を要求し、これによってリゾルバは最寄りのDNSサーバにIPアドレスを問い合わせる。リゾルバが最初に問い合わせるDNSサーバを**ローカルDNSサーバ**と呼び、一般的に組織で用意しているDNSサーバ。またはインターネットに接続しているISP(*Internet Service Provider*.インターネット接続事業者)が管理しているDNSサーバに相当する。  
ドメイン名とIPアドレスが対応付けられているデータベース(ゾーン情報)はDNSサーバが保持している。1台で全てのゾーン情報に保持するのは困難であるため、ツリー状の階層構造をとることで名前解決を行なっている。最上位のDNSサーバを**ルートDNSサーバ**と呼ぶ。ルートDNSサーバから順にたどって行けば最終的には目的のドメイン名を管理するDNSサーバにたどり着くことができる。DNSサーバは一度調べた情報をキャッシュメモリに記録しておくことができるため、毎回遡って調べることはなく、同じドメイン名があればそのDNSサーバへ問い合わせることで手間を省くことができる。

- hostsファイルによる名前解決


### `nslookup`

### `DNSのトランスポート層プロトコル`
