# HTTP / HTTPS

### `HTTPの概要`
HTTP(*Hyper Text Transfer Protocol*)は、WebブラウザとWebサーバの間でデータをやり取りするためのプロトコル。TCP上で動作し、ポート番号は80が予約されている。実際に転送されるWebページはHTML。

### `Webアクセスの流れ`
HTTP自体はWebブラウザとWebサーバとの間でメッセージと要求されたWebページを転送するためのプロトコル。要求された内容の文書を見つけ出して処理するためにはWebサーバのソフトウェアが必要。  
1.ユーザがブラウザでURLを入力してWebアクセスを開始  
2.Webブラウザは指定されたWebサーバに対して必要なデータをHTTPリクエストで要求  
3.Webサーバで動作するWebサーバソフトは、要求された内容を処理する  
4.Webサーバが要求されたWebページを返信  
5.Webブラウザは、受け取ったデータを処理してブラウザの画面上に表示

### `HTTPリクエストメッセージ`
WebブラウザがWebサーバに送るメッセージを**HTTPリクエスト**と呼び、メッセージは1つの項目を1行で表現し、複数行で構成される。以下の3つに分類。  
・リクエスト行:Webサーバに具体的に何をしてほしいかを示すメソッドを含む  
・メッセージヘッダ:詳細な情報をWebサーバに示す(データのタイプや圧縮、対応言語など)  
・メッセージボディ:Webブラウザがサーバに対してデータを送る時に使う、空白もあり

主なメソッド

|メソッド|意味                                               |
|-------|--------------------------------------------------|
|GET    |データの返信を要求                                   |
|HEAD   |データに関する情報を返信するように要求(データの要求はしない)|
|POST   |サーバにデータを送信                                  |
|PUT    |指定したURI(ファイルなど)にデータファイルをアップロード    |
|DELETE |サーバにあるデータの削除を要求                          |

### `HTTPレスポンスメッセージ`
WebサーバがWebブラウザに対して送るメッセージを**HTTPレスポンス**と呼び、3つに分類される。  
・ステータス行:Webサーバソフトでの処理結果をステータスコードで伝える  
・メッセージヘッダ:詳細な情報をブラウザに伝える部分。サーバの種類、返信するデータのタイプ、圧縮方法など  
・メッセージボディ:HTML文書や画像ファイルなどのデータを格納するための領域

HTTPレスポンスの主なステータスコード

|ステータスコード|意味                                            |
|-------------|------------------------------------------------|
|100番台       |情報。続きがあることを伝える                         |
|200番台       |成功。Weサーバソフトがリクエストを処理できたことを伝える |
|300番台       |リダイレクト。別のURLにリクエストし直すように要求する    |
|400番台       |クライアントエラー。リクエストに問題があり処理できなかった|
|500番台       |サーバエラー。サーバ側に問題があり処理できなかった       |

### `URLの仕組み`
URLを入力してWebアクセスを開始する際には、Webブラウザにはアクセス先のURLが通知される。URLの書式は、スキームとスキーム独自部分の2つに分けられ、コロンで区切る。  
先頭のhttpsの部分は**スキーム**と呼ばれ、目的のサーバにアクセスするための手段としてプロトコルを記述する。Webサーバへアクセスする場合はhttpまたはhttps、FTPサーバの場合はftp。**スキーム独自部分**にはアクセス先のホームページなどの所在を示すための情報を記述する。情報を提供するサーバの「ホスト名」とファイルの場所を指定する「パス名」で構成される。  
**HTTPS**(*Hypertext Transfer Protocol Secure*)は、HTTPにSSLによるデータの暗号化機能を付加したプロトコル。これによってWebサーバとクライアント間の通信を暗号化し、クレカ番号やプライバシーに関わる情報などを安全に送受信することができる。URLを入力する際にhttpsから始めるとSSLによる暗号化通信が可能になる。ポート番号には443が予約されている。

---
> Webアクセスが行われる前提として、WebブラウザとWebサーバ間でTCPコネクションが確立される

> `HTTP:80`  
> `HTTPS443(SSLによる暗号化あり)`  
