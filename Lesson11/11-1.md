# DHCPによるインターネット接続
DHCPサービスは、ネットワーク上のデバイスがDHCPサーバからIPアドレスとその他の設定情報を取得できるようにするためのもの。ポート番号67, 68、UDP、コンピュータがネットワーク接続時に必要となるIPアドレスなどの情報を自動的に割り当てる。

### `DHCPクライアント`
DHCPサービスによって、クライアントはIPアドレス、サブネットマスク、デフォルトゲートウェイ、その他のパラメータを自動的に取得できる。ISP(インターネットサービスプロバイダ)は、インターネットに接続される顧客の各インターフェイスに対して。静的または動的なグローバルIPアドレスを割り当てる。  
スタティックIPアドレス:常に同じIPアドレスが静的に割り振られる。固定IPアドレスとも呼ばれる  
ダイナミックIPアドレス:インターネットへ接続するごとに異なるIPアドレスが動的に割り振られる

- スタティックIPアドレスの設定  
**スタティックIPアドレス**(**固定IPアドレス**)を使用すると、WebやFTPなどの公開サーバの設置や、VPNによる拠点同士の接続など。固定IPアドレスを必要とするサービスを利用できる。ISPによって割り当てられたスタティックIPアドレスなどをCiscoルータに設定するには通常2つの手順が必要。</br>
1.スタティックIPアドレスの設定:ルータの外部インターフェイスにスタティックIPアドレスを設定する  
2.デフォルトルートの作成:インターネットへ向かうデフォルトルートを設定する

- DHCPクライアントの設定  
ISPからダイナミックIPアドレスを取得する場合、インターネットインターフェイスはDHCPクライアントとして動作するように設定する。Ciscoルータでは**ip address dhcp**コマンドを設定すると、そのインターフェイスがDHCPによってIPアドレスを取得できるようになる。割り当てられたIPアドレスと共に受信したDHCPオプションのデフォルトゲートウェイに基づいて、そのデフォルトゲートウェイを指すデフォルトルートが自動的にルーティングテーブルに挿入される。  
**DHCPクライアントの設定**  
`(config-if)#ip address dhcp`

- DHCPクライアントのリース情報の表示  
**show dhcp lease**コマンドは、DHCPクライアントに割り当てられたIPアドレスのリース情報を表示する(リース残り時間)。  
**リース情報を表示(mode:#)**  
`#show dhcp lease`

### `DHCPサーバ`
DHCPサーバによる動的なIPアドレスの割り当ては、以下のような場面で必要になる。  
インターネット接続:インターネットへの接続が必要な時に、ISPから動的にグローバルIPアドレスを取得する場合  
企業などのLAN:中・大規模LANで、従業員のPCにIPアドレスや設定情報を動的に割り当てるような場合  
モバイル(携帯可能なシステム):オフィスの共用部、飲食店や宿泊施設などで各自のノートPCをLANへ接続するような場合  
PCの台数が少なければIPアドレスの手動割り当ては許容されるが、それ以上のLANで個々のPCにIPアドレスを手動で割り当てたり時折オフィスに出社するモバイルワーカーにIPアドレスを手動で割り当てたりするのは管理上負担がかかり困難。設定を誤る可能性もある。ローカルネットワークにDHCPサーバを導入することで、IPアドレスの割り当てを簡素化できる。一般に、DHCPサーバはネットワークにおける頻繁な変更をサポートし、LANに接続されるゲストホストへ適切なIPアドレスを割り当てるのに使用される。ホストのVLAN割り当てに従って、IPアドレスを自動的にエンドホストに割り当てることもできる。集中型のDHCPサーバでは、全てのダイナミックIPアドレスの割り当てを1ヶ所で管理し、組織全体に一貫性を確保できる。

- DHCPの動作

- DHCPサーバの設定

1.DHCPプールの設定

2.ネットワークアドレスの指定

3.デフォルトゲートウェイの指定

4.DHCPオプションの指定

5.リース期間の指定

6.除外するIPアドレスの指定

- DHCPサーバ機能の検証

- DHCPプールの表示

- アドレスバインディング情報の表示

- アドレス競合の表示

### `DHCPクライアントの確認`

### `DHCPリレーエージェントの設定`
