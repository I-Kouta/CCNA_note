# ルータの基本設定

### `ルータの基本設定`
ルータは異なるネットワーク間のデータを中継する際に、ルーティングテーブルを参照する。管理者はルーティングテーブルに必要な経路情報が登録されるように設定を行う必要がある。ルータの管理をするための基本設定も行い、基本的な設定項目は以下のとおり。  
・ホスト名  
・IPアドレスとサブネットマスク  
・インターフェイスの有効化  
・インターフェイスの二重モードと速度  
・パスワード  
・ルーティング

- ホスト名の設定  
ルータそのものを識別するための情報で、常にプロンプトに表示されている。デフォルトでは「Router」で、識別しやすい名前に設定することで管理者はネットワーク上にある複数台のルータを区別し管理しやすくなる。  
**ホスト名の設定**  
`(config)#hostname <hostname>`  

- IPアドレスの設定  
ルータの各インターフェイスにはIPアドレスとサブネットマスクの設定が必要。インターフェイスにIPアドレスとサブネットマスクを割り当てると、そのIPアドレスとネットワークアドレスが自動的にルーティングテーブルに登録される(インターフェイスが有効の場合)。設定はインターフェイスコンフィギュレーションモードで行う。同じインターフェイスでこのコマンドを別のアドレスに変えて実行すると新しいIPアドレスに上書きされる。**no ip address**コマンドを実行すると割り当てたIPアドレスは消去される。  
**IPアドレスの設定**  
`(config-if)#ip address <ip-address> <subnet-mask>`  

### `インターフェイスの有効化 / 無効化`
デフォルトでは**shutdown**コマンドが設定され無効になっている。通信が必要なインターフェイスには**no shutdown**コマンドを実行して有効にする必要がある。このコマンドの設定情報はrunning-configにもstartup-config上には表示されない。各インターフェイスのセクション内に「shutdown」行の表示が無ければ有効(no shutdown)。  
**インターフェイスの有効化**  
`(config-if)#no shutdown`

**インターフェイスの無効化**  
`(config-if)#shutdown`

### `二重モードと速度の設定`
オートネゴシエーション機能が有効になっており、接続先の端末との間で二重モード(通信モード)や速度などの情報を交換し合い、双方でサポートしている技術を自動選択することができる。ネゴシエーションを行わずに固定に設定している場合、インターフェイスコンフィギュレーションでコマンドを実行する必要がある。  
**二重モードの設定**  
`(config-if)#duplex {auto | full | half}`  
auto:オートネゴシエーションに設定する(デフォルト)  
full:全二重にする  
half:半二重にする(10000Mbpsで動作するポートには設定できない)

**速度の設定**  
`(config-if)#speed {10 | 100 | 1000 | auto}`  
10:10Mbpsにする  
100:100Mbpsにする  
1000:100Mbpsにする(10 / 100 / 1000Mbpsポートに対してのみ設定)  
auto:オートネゴシエーションに設定(デフォルト)

- 二重モードの設定例  
イーサネットインターフェイスの二重モードと速度の設定はデフォルトではautoになっている。片方のインターフェイスに対してのみ固定で設定した場合、ネゴシエーションは失敗して半二重通信になる。オートネゴシエーションに失敗し半二重通信で通信が可能な状態だとリンクアップ(半二重通信の設定)、固定の設定が不一致だとリンクダウンになる。接続機器によっては二重モードが不一致でもリンクアップになる。ただし、通信は不安定な状態でパフォーマンスは低下する。

### `その他の基本設定コマンド`
Catalystスイッチに対しても同様のコマンドが使用可能。

- 割り込みメッセージのコマンド再表示  
コマンド入力の途中で何らかのメッセージが割り込むように表示されると、続きのコマンドが入力しにくくなる。**logging synchronous**コマンドを設定しておくと、メッセージが表示されたときに入力していたコマンドは開業した新しい行に表示されるため、コマンドの続きがスムーズに入力できメッセージ内容も読みやすくなる。

- インターフェイス説明文  
**description**コマンドを使用すると、各インターフェイスに説明文を設定することができる。インターフェイスの接続先や使用目的が分かるようなコメントを記述しておくと、管理やトラブルシューティングの際に役立つ。説明文はshow running-configやshow interfaces, show statusコマンドで表示される。インターフェイス設定モードに移行し説明文を設定、などのように用いる。  
**インターフェイス説明文の設定**  
`(config-if)#description 説明文`  

---
> ルータのインターフェイスは初期状態で「shutdown(無効)」になっているため、初めて使用する際には有効化すること
