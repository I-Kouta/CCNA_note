# Cisco IOSイメージの管理
Ciscoイメージファイルには、Ciscoデバイスの運用に必要なCisco IOSソフトウェアが含まれている

### `Cisco IOSイメージのロード`
ルータのブートストラップコードがフラッシュメモリ内で有効なCisco IOSイメージを検出すると、通常IOSイメージファイルは圧縮されているためファイルを展開してRAMにロードしてIOSが実行される。IOSイメージの展開中は#の文字列が表示される。**show version**コマンドを使用すると、実行中のCisco IOSソフトウェアのバージョン、ブートストラッププログラムのバージョン、ハードウェア構築(インターフェイスやメモリサイズなど)に関する情報が確認できる。ルータの基本ハードウェアおよびソフトウェアコンポーネントを確認でき、トラブルシューティングの際にも役立つ。

### `Cisco IOSのファイルシステム(IFS)`
ファイルシステムとは、オペレーティングシステムがファイルを階層的に整理し管理するための包括的な概念のこと。WindowsにはC:ドライブがあり、階層的に用意された複数のフォルダにファイルを整理して保存している。Cisco IOSデバイスには**Cisco IFS**(*Integrated File System*)というファイルシステムがあり、Ciscoデバイス上でディレクトリ(フォルダと同義)を作成、移動、操作できる。
|プレフィックス          |説明                                      |
|---------------------|------------------------------------------|
|flash:               |フラッシュメモリ。全てのプラットフォームで使用可能|
|system:              |RAM。実行中のrunning-configを含むシステムメモリ|
|nvram:               |NVRAM                                     |
|ftp:                 |ネットワーク上のFTPサーバ                     |
|tftp:                |ネットワーク上のTFTPサーバ                    |
|usbflash0:, usbflash1|USBポート                                   |

使用可能なディレクトリはプラットフォームによって異なる。**show file systems**コマンドを使用すると、デバイス上で使用可能な全てのファイルシステムがリスト表示される。また、使用可能な空きメモリやファイルシステムのタイプとその権限など、状態を把握するのに役立つ情報も表示する。  
**ファイルシステムの表示(mode:#)**  
`#show file systems`  
*が付加されている場合、デフォルトのファイルシステムであることを示す。Flagsは権限を示し、読取専用(ro)、書込専用(wo)、どちらも(rw)がある。

### `Cisco IOSの命名規則`
Cisco IOSイメージファイル名は、どのような機能をもっているかを識別するために、下記命名規則に基づいている。  
例:「プラットフォーム(1) --- フィーチャーセット(2) --- ファイル形式(3) --- バージョン(4) --- 拡張子(5)」  
1:Ciscoデバイスのプラットフォーム。「c181x」の場合、Cisco c181xサービス統合型ルータ  
2:フィーチャーセット(機能セット)。「advipservicesk9」の場合、Advances IP Servicesを指す  
3:イメージの実行場所とファイルが圧縮されているかどうかを示す。mはRAMメモリ、zはZIP形式で圧縮されている意味  
4:バージョンおよびリリース番号。「151-4.M5」の場合、15.1(4).M5を指す  
5:ファイル拡張子。binの場合、バイナリ実行可能ファイルであるという意味

- IOSのバージョン表記  
IOSバージョン15.0以降ではバージョン表記は次のようになる。  
例:15.2(4).M2  
15:バージョン番号  
(4):フィーチャリリース番号  
M:トレイン(MまたはT)  
2:リビルド番号  
**トレイン**は、特定のプラットフォームおよびフィーチャセットにCiscoソフトウェアを提供するための手段。「M」は拡張メンテナンスリリースで、バグ修正などのサポートは44ヶ月提供される。「T」は標準メンテナンスリリースで、サポート期間は18ヶ月。リビルド番号は、追加機能なしでバグ修正が行われた回数を示し、数字が大きいほど安定性が高い。基本的に最新版のMリリース(リビルド番号が大きいもの)を選択する。

### `Cisco IOSイメージのバックアップ`
Cisco IOSイメージファイルはフラッシュメモリに格納されている。IOSイメージの破損や誤って消去するようなトラブルに備えて、IOSファイルをTFTPやFTPサーバにコピーし、バックアップを作成しておくことで、素早くリカバリできる。IOSソフトウェアをTFTPサーバへコピーする前には準備が必要。

- TFTPサーバへの接続を確認

- TFTPサーバのディスク領域を確認

- IOSイメージのファイル名を確認

### `Cisco IOSイメージのアップグレード`

- 新しいイメージファイルの選択

- TFTPサーバへの接続を確認

- フラッシュメモリのディスク領域を確認

- RAMの容量を確認
