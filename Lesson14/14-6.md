# Cisco IOSイメージのライセンス
Cisco IOSソフトウェアアクティベーション機能は、Ciscoソフトウェアライセンスを取得および確認し、Cisco IOSソフトウェアのフィーチャセットをアクティブにする。

### `新しいライセンスモデル`
シスコは第2世代サービス統合型ルータから、Cisco IOSソフトウェアの新しいライセンスモデルを採用しており、プラットフォームごとに1つのユニバーサルCisco IOSソフトウェアイメージがインストールされている。**ユニバーサルデザイン**にいは、全てのフィーチャ(機能)が含まれている。どの機能が利用できるかは、購入したライセンスによって決定される。追加で必要な機能がある場合は、対応するライセンスを購入してアクティブにする必要がある。IOSソフトウェアイメージをインストールしなくても、各フィーチャの有効 / 無効は、ライセンスキーによって簡単に切り替えられる。**シスコソフトウェアアクティベーション**(CSA)は、ソフトウェアフィーチャやコンポーネントを有効にするために使用されるメカニズム。特定デバイスのフィーチャセットに一意のライセンスキーを生成し、ライセンスに対応する機能をアクティブする。次世代ルータの導入によって、Cisco IOSソフトウェアのパッケージ方法が変わる。新しいライセンスモデルでは、ソフトウェアテクノロジーパッケージを選択する手間が簡略化され、サービスをより迅速に導入できるようになる。  
テクノロジー固有のフィーチャはテクノロジーパッケージとしてグループ化されている。サービス統合型ルータは。複数のテクノロジーパッケージライセンスがデフォルトでインストールされている。ユーザは必要なライセンスを購入してアクティブ(有効)にするだけで済む。  
IP Base:基本的なIP制御機能を提供するテクノロジーセット  
Data(DATA):包括的なIP制御機能を提供するテクノロジーセット  
Security(SEC):IPセキュリティ機能を提供するテクノロジーセット  
Unified Communications(UC):IPテレフォニー機能を提供するテクノロジーセット

### `ライセンスタイプ`
ソフトウェアアクティベーションには、さまざまな種類のライセンスが提供されている。

- 永久(パーマネント)ライセンス  
ライセンスに期限切れはなく、一度永久ライセンスをインストールすると、デバイスの寿命が尽きるまでライセンスが有効になる。例えばDATAライセンスをルータにインストールした場合、ルータを新しいCisco IOSソフトウェアリリースにアップグレードしても、以降のフィーチャに対してライセンスはアクティブ化される。デバイスにフィーチャーセットを購入する場合に最も一般的なライセンスタイプ。

- 評価(一時)ライセンス  
一時ライセンスとも呼ばれ、限定された期間(60d)だけ有効。新しい機能の評価や緊急時に使用される。期間が満了しても、デバイスは再起動されるまで正常に機能し続けるが、再起動されると一時ライセンスがアクティブになる前の機能に戻る。全ての次世代ルータには、DATA、SEC、UC用の評価ライセンスが含まれている。顧客はフィーチャセットを評価したあとに、永久ライセンスの購入とアップグレードする時間を柔軟に決定できる。

他にも、時間に基づいて定期的に更新する必要がある「サブスクリプションライセンス」、指定された使用回数だけ有効になる「カウントライセンス」などがある。

### `ライセンスの確認`
現在アクティブなライセンスは**show version**コマンドで確認できる。ライセンスに関する情報はこのコマンドの下部に表示される。出力から、現在はIP Base(ipbasek9)のみ有効化されていることが確認できる。IP Baseライセンスは、DATA、SEC、UCライセンスをインストールするための前提条件になる。Cisco IOSソフトウェアライセンスに関する情報を確認するには**show license**コマンドを使用する。このコマンドは、ライセンスの残りの期間(永久ライセンス以外)やカウント情報(カウントライセンス)などが確認できる。コマンドの後にfeatureキーワードをつけると、各ライセンスの要点をリスト表示する。  
**ライセンスの確認(mode:#)**  
`#show license [feature]`  
feature:テクノロジーパッケージライセンスとフィーチャーライセンスをリスト表示(オプション)

### `評価ライセンスの有効化`
購入したルータには、そのルータがサポートしているほとんどのパッケージと評価(一時)ライセンスが付属される。新しいパッケージまたはフィーチャを試す場合は、評価ライセンスをアクティブにする必要がある。評価ライセンスを有効にするには、**license boot module**コマンドを使用する。ルータでサポートしているモジュール名、パッケージ名は?を付加して確認する。ライセンスの有効化を実行し、reloadコマンドを使用してルータを再起動する。目的のライセンスが有効になっていることをshow versionやshow licenseコマンドで確認する。  
**評価ライセンスの有効化**  
`(config)#license boot module <module-name> technology-package <package-name>`  
module-name:モジュール名を指定  
package-name:テクノロジーパッケージライセンス名を指定

### `永久ライセンスのインストール`
購入したルータには、IP Baseソフトウェアアクティベーションキーがデフォルトでインストールされている。発注時の追加キーは、顧客の発注に応じてプリインストールされて出荷される。購入後の追加ライセンスについては、下記手順が必要になる。  
1.インストールするパッケージまたはフィーチャを購入する。購入したPAKを受け取る  
2.いずれかの方法でライセンスファイルを取得する  
・Cisco License Manager:Cisco IOSソフトウェアライセンスを容易に取得してライセンス状態を管理できる無料のソフトウェアアプリケーション  
・Cisco License Registration Portal:ライセンスを個別に取得して登録するためのWebポータル  
3.Cisco IOSからライセンスのインストールを実行する  
ライセンスを取得する際には、PAKとUDIの入力が必要になる。  
PAK:*Product Authorization Key*(製品認証キー)。11桁の英数字を組み合わせたキーで、特定のソフトウェア購入を認証する。PAKは書面または電子的に発行される  
UDI:*Unique Device Identifier*(固有デバイス識別情報)。Product ID(PID:製品番号)とSerial Number(SN:シリアル番号)の2つのコンポーネントから構成される  
UDIは**show license udi**コマンドを使用して確認できる。シリアル番号はデバイスを一意に識別する11桁の数字であり、製品番号はデバイスのタイプを識別する。  
**UDIの表示(mode:#)**  
`#show license udi`

- 永久ライセンスのインストール  
永久ライセンスをインストールするための要件は以下の通り。  
・PAKを取得する  
・Cisco.comに登録済みのユーザ名とパスワード  
・UDIの情報(`show license udi`から入手)  
ライセンスファイルのアップロードが完了したら、**license install**コマンドで新しいライセンスをインストールする。インストール後、ライセンスをアクティブかするためにルータを再起動する。ただし、評価ライセンスがアクティブな場合、再起動の必要はない。show versionコマンドやshow licenseコマンドを使用して、目的のライセンスがアクティブになっていることを確認できる。出力のライセンスタイプがPermanentになっていればDATAライセンスが永続的にアクティブになっている。  
**ライセンスのインストール**  
`#license install <stored-location-url>`  
stored-location-url:ライセンスファイルの格納先とファイル名を指定

### `ライセンスのバックアップ`
ルータのライセンスをバックアップするには、**license save**コマンドを使用する。デバイス内の全てのライセンスのコピーを指定した場所へ保存できる。ルータでサポートしている保存場所は、コマンドに?を付加して確認できる。保存したライセンスは、license installコマンドで復元が可能。  
**ライセンスのバックアップ**  
`#license save <file-sys:license>`  
file-sys:保存場所となるファイルシステムを指定  
license:保存先のライセンス名を指定
