# スマホ学習

・あるコンピュータをスイッチのポートに接続した。スイッチポートのLEDは正常に点灯していることが確認できる。ホストからpingを実行すると「*Request timed out*」とメッセージが表示される。問題がある可能性はどこか。  
**ネットワーク層**  
スイッチポートのLEDが正常に点灯している場合、コンピュータとスイッチ間は正しく機能している。つまり、OSI参照モデルの**データリンク層まで機能している**と判断できる。pingはOSI参照モデルの**ネットワーク層におけるネットワーク診断ツール**。pingを実行して上記のメッセージが表示された場合、ネットワーク層に問題があると考えられる。

---
・データを送信する際に、データがカプセル化されて物理的な電気信号に変換されるまでの順番  
データ  
↓  
セグメント(L4ヘッダ / トランスポート層)  
↓  
パケット(L3ヘッダ / ネットワーク層)  
↓  
フレーム(L2ヘッダ / データリンク層)  
↓  
ビット  
送信元では上位層プロトコルから渡されたデータに、そのプロトコルのヘッダを付加して下位層のプロトコルに渡す。

---
・異なるネットワーク上に存在している宛先ホストのアドレスをヘッダ内に格納している階層(OSI参照モデル)  
**ネットワーク層**  
ネットワーク層は、**異なるネットワーク上に存在しているホストとの通信を実現する**ために、IPアドレスなどの**論理アドレス**を使用する。IPヘッダ内には送信元IPアドレスと宛先IPアドレスが含まれる。送信元と宛先のIPアドレスは、**異なるネットワーク上のアドレスでも良い**。なお、データリンク層は同一リンク上に接続された隣接ノードとの通信を提供するため、データリンク層ヘッダ内に含まれる送信元と宛先のアドレスは同じネットワーク上のアドレスになる。

---
・Catalystスイッチに設定したデフォルトゲートウェイを確認できるコマンド  
`show running-config`  

---
・CatalystスイッチのMACアドレステーブルから、次のエントリが削除されないようにしたい。使用すべきコマンド  
ポート:FastEthernet0/5  
VLAN:1  
MACアドレス:001b.5492.1234  
`(config)#mac address-table static 001b.5492.1234 vlan 1 interface fastethernet 0/5`  
MACアドレステーブルからエントリを削除されないようにするにはエントリを手動で登録する。  
スタティックMACアドレステーブル登録(永続的に保持される):  
`(config)#mac address-table static <mac-address> vlan interface`

---
・ルーティングテーブルを確認するコマンド  
`show ip route`  
ユーザEXECモードまたは特権EXECモードで使用する

---
・VLAN2をSalesという名前で作成するコマンド  
`(config)#vlan 2 (config-vlan)#name Sales`  
グローバルコンフィギュレーションモードでvlanコマンドを使用する。上記だと、2とSalesを指定している

---
・小規模オフィス内には6台のホストがある。各ホストにIPアドレスを割り当てるための最適は方法  
**各ホストに手動でIPアドレスを割り当てる**  
自動的に割り当てる場合はDHCP機能を使う(67, 68, UDP)。自動で割り当てる場合は端末の台数が多いほど手間が省ける。6台程度であれば手動が最適。

---
・12ポートを持つCatalystスイッチに3つのVLANを設定した。コリジョンドメインとブロードキャストドメインの数は？  
コリジョンドメイン:12, ブロードキャストドメイン:3  
スイッチは**ポートごとにコリジョンドメインを分割する**。スイッチにVLANを設定すると、**VLANごとにブロードキャストドメインを分割できる**。

---
・スイッチがあるポートでフレームを受信した。そのフレームの宛先MACアドレスはMACアドレステーブルにエントリが存在していない。このときスイッチが行う処理  
**フラッディング**  
スイッチがは該当する宛先MACアドレスがMACアドレステーブルに登録されていない場合、受信したポート以外のポートからフレームを転送する。以下のフレームを受信するとフラッディングを行う。  
・登録していないMACアドレス宛のユニキャストフレーム  
・ブロードキャストフレーム  
・マルチキャストフレーム

---
VLSM(*Variable Length Subnet Mask*:**可変長サブネットマスク**)の利点  
**IPアドレスを効率よく使用できる**  
VLSMでは、サブネットごとに必要なホストアドレスに応じて異なるサブネットマスクを使用できる。サブネット化されたネットワークアドレスもサブネット化できるため、IPアドレスの無駄を抑えて効率の良いアドレッシングを行える。効率的に経路集約を行うには階層型のアドレッシングが重要であり、VLSMの利点ではない。VLSMをサポートしていないルーティングプロトコルでも、自動経路集約を行うことができる。

---
IOSソフトウェアのファイル名とサイズを確認するコマンド  
`show flash:`  
フラッシュメモリに格納されたIOSソフトウェアのファイル名とサイズを確認できる。`show version`はIOSのバージョンやファイル名は表示するがサイズは表示しない。`show running-config`はIOSのバージョンを表示するがサイズは表示しない。

---
IPv6ネットワークで使用するディスタンスベクタールーティングプロトコル  
**RiPng**  
RIPは、IPネットワークで最もよく使われるディスタンスベクタールーティングプロトコル。IPv6で作動するRIPをRIPng(*RIP Next Generation*)と呼ぶ。

---
ルータのVTY(仮装端末)にコマンドを追加設定した。説明で正しいもの  
`RT!(config)#line vty 0 4`  
`RT1(config)#transport input ssh`  
**VTY回線を介してリモートから管理接続するプロトコルとしてSSHのみが許可されている**  
`transport input ssh`コマンドを設定すると仮装端末へ管理接続する時のプロトコルにSSHだけを許可し、Telnetによる管理接続はできなくなる。どちらも許可する場合、`transport input telnet ssh`のように設定する。デフォルトではall。同時に最大5つのリモート管理接続を可能にする。

---
対向機器ののポートとネゴシエーションを行なって動的にトランクポートを設定するプロトコル  
**DTP**  
Catalystスイッチは対向機器のポートとネゴシエーションを行い、水地ポートのモードを動的にトランクしたりアクセスしたりできる。設定に応じてスイッチポートのタイプ、トランクプロトコルを動的に切り替えるためのシスコ独自のプロトコル。

---
IPアドレス「17.16.10.1」のクラスフルネットワーク  
**172.16.0.0**  
クラスフルネットワークは、クラスによって定義されているネットワーク。このIPアドレスはクラスBアドレスであり、第2億手とまでがネットワーク部なので、それ以降を0にしたものがクラスフルネットワークにあたる。

---
・スイッチにIPアドレスを割り当てる目的  
**スイッチのリモート管理を可能にするため**  
離れた場所からTelnetやSSHでスイッチへ管理アクセスしたり、SNMPを使用してスイッチに関する情報収集や管理をできる。スイッチによるフレームの転送はMACアドレスを基に行うため、同じLAN(ブロードキャストドメイン)に接続されたホスト間のフレームを転送して相互通信できるようにするためにIPアドレスは不要。デフォルトゲートウェイを提供するのはルーティングデバイス(ルータやレイヤ3スイッチ)。

---
2台のスイッチ間を接続する1本のリンク上に複数のVLANトラフィックを転送するときに使用するケーブル  
**UTPクロスケーブル**  
2台のスイッチ間を接続するには、UTPクロスケーブルを使用する。複数のVLANトラフィックを伝送するトランクリンクでも同様。

---
インターフェイスを管理的に無効にするコマンド  
`(config-if)#shutdown`  
この機能によって未使用のインターフェイスを保護したりハードウェア保守を行う際に一時的にネットワークから切り離したりすることができる。インターフェイスコンフィギュレーションモードで使用する。

---
ブロードキャストフレームがMACアドレステーブルに登録されない理由  
**尊信元アドレスはブロードキャストアドレスにならないため**  
スイッチはフレームを受信すると、イーサネットヘッダ内にある送信元MACアドレスと受信したポートを関連付けてMACアドレステーブルに登録する。

---
ネットワーク管理者がスイッチにポートセキュリティを設定する理由  
**アクセス権限のないホストがLANに接続されるのを防ぐため**  
ポートセキュリティはスイッチでサポートするレイヤ2のセキュリティ機能。予め許可しているMACアドレスからのフレームを転送し、それ以外のMACアドレスをブロックすることで、アクセス権限のない不正なホストによるLAN接続を防ぐ。

---
`show interfaces`コマンドを実行し、出力結果の末尾に--More--と表示された。スペースキーを押した時の処理  
**続きの1画面が表示される**  
スペースキーを押すと続きの1画面、Enterだと続きを1行ずつ、それ以外だと出力表示を中止する。

---
VLAN99をネティブVLANに変更するためのコマンド  
`(config-if)#switchport trunk native vlan 99`  
ネイティブVLANはポートごとに変更することができ、デフォルトではVLAN1がネイティブVLANとして設定されている。フレームのループやVLANトラフィックが混在するなどの問題が発生するのを避けるため、ネイティブVLANはトランクリンク両端で一致させる必要がある。

---
スイッチポートをオートネゴシエーションせずに全二重に設定するためのコマンド  
`(config-if)#duplex full`  
接続される機器同士で速度と通信モード(二重モード)を合わせないと正しく通信できない。オートネゴシエーションは、接続している2つのポート同士が対応している通信規格や通信モードの違いを自動的に判定し、最適な設定で通信できる機能。スイッチポートはデフォルトでオートネゴシエーションが有効になっている。

---
作成した100番のアクセスリストを削除するコマンド  
`(config)#no access-list 100`  
作成したアクセスリストを削除するには、グローバルコンフィギュレーションモードから**no access-list**コマンドを使う。指定したアクセスリストにある全てのステートメントが削除される。

---
ディスタンスベクターにおける無限カウントの問題を防止するために用いる手法  
**最大値の定義**  
無限カウントとは、あるネットワークに障害発生時にネットワークへの誤った経路情報がルータ間で交換され、ルーティングテーブルのアップデート送信が続き、メトリック値が増え続けてしまう状態。無限カウントは最大値の定義で防ぐことが可能。RIPの場合はホップ数の上限を15に定義されており、16は無効なネットワークと認識される。トリガードアップデートとスプリットホライズンは、ルーティングループの問題を解決する。

---
IPv6インターフェイスの状態を確認するコマンド  
`show ipv6 interface`  
IPv6インターフェイスの状態や統計情報を確認することが可能。特定のインターフェイスの情報だけを表示したい場合は末尾にインターフェイス名を指定。`show interfaces`、`show ip interface`コマンドは、IPv4のインターフェイスに関する情報を表示する。

---
IPv4の127.0.0.1に相当するループバックアドレス  
**::1/128**
**IPv4のループバックアドレスは::1(0:0:0:0:0:0:0:1)で定義**されている。これがIPv4の127.0.0.1に相当する。/128はアドレスの先頭から128ビットの範囲を示している。

---
IPパケットをフィルタリングするための標準アクセスリストを番号で作成するとき、リスト番号の範囲で正しいもの  
**1 ~ 99と1300 ~ 1999**  
番号を指定して作成するACLを番号付きACLと呼ぶ。IOSではネットワーク層プロトコルの種類と標準 / 拡張ACLを番号で識別する。IPv4では名前付きACLのみをサポートしている。
|プロトコルの種類|ACL番号               |
|--------------|---------------------|
|IPv4標準       |1 ~ 99, 1300 ~ 1999  |
|IPv4拡張       |100 ~ 99, 2000 ~ 2699|
|AppleTalk     |600 ~ 699            |
|IPX標準        |800 ~ 899            |
|IPX拡張        |900 ~ 999            |

---
標準アクセスリストの条件に設定できる項目  
**送信元IPアドレスとワイルドカードマスク**  
標準ACLでは、送信元IPアドレスだけをチェックしてパケットを識別する。送信元IPアドレスを指定するために、ワイルドカードマスクも設定できる。ワイルドカードマスクは、IPアドレスのどの部分をチェックする必要があるかを指定するための値。これによって、IPアドレスの範囲を指定することができる。

---
用語  
> `コリジョンドメイン`:`コリジョンによって影響を及ぼす範囲`のこと。スイッチ、ルータはポートごとに分割でき、リピータやハブでは分割できない  
> `ブロードキャストドメイン`:ネットワーク上の全ノードを対象にして、データを送るために予約されている特別なアドレス。IPアドレスであれば255.255.255.255

> リピータ:レイヤ1  
> ハブ:レイヤ1  
> スイッチ:レイヤ2  
> ブリッジ:レイヤ2  
> ルータ:レイヤ3
