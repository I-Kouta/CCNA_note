### `物理層・データリンク層2`

`スイッチの機能`

- スイッチの基本動作  
MACアドレスが分かっている場合、対象ポートにデータを送り

- 半二重・全二重・オートネゴシエーション  
半二重通信は通信を片道にする、全二重通信は通信を両方向にする、オートネゴシエーションは自動で判別する

- フレームの転送方式  
イーサネットフレーム末尾のFCSまで蓄えてから転送する「ストア&フォワード方式」、送信先のMACアドレスが分かり次第データの転送を開始する「カット&スルー方式」、フレームの先頭64bytesを見込んだ後に転送する「フラグメントフリー方式」などがあり転送速度に違いがある

- スイッチのフロー制御:通信がバッファに溜まりすぎた場合に、(半二重の場合)ジャム信号や(全二重の場合)PAUSEフレームを出して制御する

- スイッチのセキュリティ  
接続が禁止されているMACアドレスの機器があった場合にポートをシャットダウンするなどの措置をとる

- スパニングツリー  
障害対応のため冗長化(通信経路を2種類以上用意する)を行うことがある。その場合、ループが発生してしまう可能性があるため、スパニングツリーによってポートの有効・無効が制御される

- リンクアグリゲーション  
LANのPCやスイッチ間を複数のリンクで接続することで、障害耐性の向上と高速化を実現する仕組み。冗長化でスパニングツリーを用いる場合では、通信するポートとしないポートを決定して通信するポートのみ通信するが、リンクアグリフゲーションを利用すれば、複数のポートを同時に使うことができる

- VLAN  
仮想的にスイッチでVLANを分けることができる。物理的に繋がっていてもVLANとは通信できない。同じVLAN同士では通信できるが、異なるVLAN間では通信できない

`Ethernet`  
イーサネットは現在最も普及している屋内で用いられる**物理層・データリンク層の技術**。他のデータリンク層と比べて制御の仕組みが単純でNICやデバイスドライバが作りやすいため

- イーサネットの接続形態  
イーサネットの普及当初は同軸ケーブルでバスタガの形態で接続していたが、現在はLAN(UTP)ケーブルやスイッチ・ハブを用いてスター型トポロジの形態をとるようになっている

- イーサネットで用いられるケーブルの名前  
BASEの前に付く10や100、10Gはそれぞれ10Mbpsなどの伝送速度を意味している。後ろに付く5や2、TやFは媒体の違いを示している

- 規格の変遷  
バス型接続のDIXイーサネット(同軸ケーブル)から始まり、IEEE802.3として標準化されながら規格が増えていった。  
10BASE2(同軸ケーブル)  
100BASE-TX(ファストイーサネット)  
1000BASE-T(ギガビットイーサネット)など数多くの規格が追加された

- コリジョン回避:以前はCSMA / CDを採用していたが、昨今のインターネットでは全二重が大半を閉めるため、ほとんど使われていない

- イーサネットのフレームフォーマット  
「宛先MACアドレス」「送信元MACアドレス」「802.1Qタグ」「長さ / タイプ」「データ」「FCS」からなる。802.1QタグはVLANのプロトコル。オプションとなっており、これを使用するときだけ付加される。FCSはフレームの後方で、データが破損していないか確認する
